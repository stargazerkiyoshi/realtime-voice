# 变更：重构通话 FSM（顺序轮次、可靠重启、暂时禁用打断）

## 背景
- 现有会话内核把 ASR 闲置关闭误判为异常，直接终止 session，导致静默 5s 后通话被中断。
- 打断（barge-in）与播放/ASR 重启耦合紧密，但当前优先级是先保证稳定的顺序对话链路。
- 缺少显式的轮次管理、闲置/超时策略与可恢复的错误处理，ASR/TTS/LLM 的“计划内关闭”没有贯通。

## 目标
- 定义并落地新的通话 FSM/轮次管理：speech_start → speech_end → 生成/播放回复 → 回到监听，闲置/超时只结束本轮、不终止 session。
- 统一“计划内关闭”协议，确保 ASR/TTS/LLM 的 idle/超时/正常结束不会冒泡为 SESSION_ERROR。
- 默认运行“非打断、顺序对话”模式，暂时注释掉打断逻辑，为后续稳定化留钩子。
- 可配置的闲置/超时策略（如 idle_ms、max_utter_ms、silence_to_hangup_ms），并与 FSM 行为对齐。
- 前端控制台同步适配：日志默认收起并可清空；新增按角色分栏的整段对话展示（助手左、用户右）。

## 影响
- 新增/修改能力：通话 FSM、轮次管理、错误恢复策略。
- 代码：会话内核（FSM、事件总线、播放队列）、ASR/TTS/LLM 适配器的计划关闭接口、配置层。
- 与现有变更 `add-asr-tts-llm` 协同，需保证链路稳定性。
